zenHttpbl (HTTP Blacklist)
==========================

##What is it?##

zenHttpbl is a spambot/harvester blocking tool. zenHttpbl is a Zenphoto plug-in implementation of Project Honey Pot's HTTP:BL system. Sounds neat right?  Let me guess, you have no clue what I'm talking about. Keep reading...

**Q.** What is Project Honey Pot and why would I want to use the HTTP:BL system?

**A.** For the best description about what Project Honey Pot does I'll simply provide this link to their [About Page](http://www.projecthoneypot.org/about_us.php) and give you an excerpt:

Project Honey Pot is the first and only distributed system for identifying spammers and the spambots they use to scrape addresses from your website. Using the Project Honey Pot system you can install addresses that are custom-tagged to the time and IP address of a visitor to your site. If one of these addresses begins receiving email we not only can tell that the messages are spam, but also the exact moment when the address was harvested and the IP address that gathered it.

Pretty nifty right?  But that's not all.. Imagine if one of the spambots or harvesters browsed on over to your gallery...   Wouldn't it be amazing to simply stop their traffic?  Instead of wasting precious bandwidth just simply shut them down?  That's where the HTTP:BL system comes in.  From the HTTP:BL about page:

The HTTP Blacklist, or "http:BL", is a system that allows website administrators to take advantage of the data generated by Project Honey Pot in order to keep suspicious and malicious web robots off their sites. Project Honey Pot tracks harvesters, comment spammers, and other suspicious visitors to websites. Http:BL makes this data available to any member of Project Honey Pot in an easy and efficient way.


So... what I have done is written an plug-in implementation of the HTTP:BL API system for ease of use with Zenphoto.  You simply upload, enable, set your options and enjoy a spamfree site. There's obviously a more technical explanation of it, but do you want that?  Or do you just want to cut the spam? So what are we waiting for, right?


##Disclaimer##

Please note that this plugin may break some privacy laws, such as Germany as it sends data to US servers to check the IP. You are responsible for adhering to all Privacy Laws applicable for your location.
__Special Note:__

While you can certainly install and use the HTTP:BL service alone (after signing up for your free API key), I encourage you to be an active participant in the Project Honey Pot service to the fullest by installing your own honey pots or linking to Project Honey Pot's quick links.  The more people that use this portion of the service to track and catch spambots/harvesters/comment spammers, the more accurate and up-to-date the HTTP:BL service stays.

##Changelog##

* **v1.4.4.4**
- Version update after testing with 1.4.4.4 build.
- Moved download to GitHub repository.
- Added directions for testing the HoneyPot plugin.
- Added redirect to QuickLink if specified and HoneyPot file not specified.
- Ordered of redirect/exit in following priority. HoneyPot File -> QuickLink -> Exit()

* **v 1.4.1-BETA**
- Version update after testing with 5/16/2011 trunk build.

* **v 1.4.0.3-7031**
- Housekeeping change to file archive names.
- Added the ability to test zenHttpbl with manually set IP via options.
- Added rudimentary incremental counter to track the number of bad events blocked by zenHttpbl.

* **v1.4.0.3-6859**
- Plug-in creation and coding.
- Documentation and project page creation.
- Release!

##Installation##

1. Download and unpack the package from the link below.
2. Upload the zenHttpbl.php to your "root/plugins" folder.  This file does NOT belong in the zp-extensions folder, and does NOT belong under its own folder.
3. Access your Zenphoto admin backend, enable the plug-in.
4. Set your options, then enable the plug-in.  I have populated the date and threat score fields with recommended values but feel free to change these to your own liking.
5. You **MUST** sign up for your own HTTP:BL API key.  This is done by signing up for Project Honey Pot [click here](http://www.projecthoneypot.org/?rf=90351) first.  Once you have registered for your Project Honey Pot, login, and click the Services tab.  On the second set of links below the Services click "Setup HTTP Blacklist". After verifying a quick Captcha you'll be given an API Key for the HTTP:BL system.
6. (Suggested step) I suggest you also install a honey pot, or at least setup a QuickLink for use with the HTTP:BL system.  What this will do is help keep the HTTP:BL system up-to-date and accurate as it will assist in the tracking of spambots/harvesters/comment spammers.

#How to Test The Honeypot#

So now you've installed the plugin, configured it with your API key, and even installed quicklinks and honeypot links. You've begun browsing your gallery and notice nothing different. This is a good thing, it means your IP is not considered malicious ;)

So how can you test to make sure things are working? Under *Options -> Plugins -> zenHttpbl you'll see two options.*

*"Test with a manual IP"* and *"Enter Test IP Here"*

The first is a check box to enable test mode. The second is where you would input an IP address to test. For your first test, you could enter your own IP. Enter your IP, check the box for enable test mode, and click apply. Now browse your gallery and at the top you should see (probably looking out of place on the theme as it is sent before any theme info is sent) "Testing: xxx.xxx.xxx.xxx.dnsbl.httpbl.org"

This is completely normal, it means that it sent your IP to the dnsbl service and the threat rating returned was under the threat settings in the plugin.

So what happens when a spammer hits the site? Open up Project Honey Pot in a separate tab/window and just copy/paste one of the spammer IP's from the most recent lists. Enter that into your options, click apply, then browse the site.

One of three things should happen:

* If you haven't added your own honeypot or quick links the page should simply show the "testing: xxx.xxx.xxx.xxx.dnsbl.httpbl.org" and then nothing. It will block all the rest of the data that would normally have been sent to the spammer/robot.
* If you've added a quick link, but haven't added a honeypot file on your site, it will instead forward the browser to the quick link.
* If you have added a honeypot to your site, it will forward the browser to your honeypot.

And so you see what the spammer sees. This is a theme only plugin, so you can still access your admin backend like normal. Go into the plugin options, uncheck the test with manual ip field, and you should be back to normal browsing.

##Donate##

If you enjoy this plugin and find it useful, donate to myself, the Zenphoto developers, or the Zenphoto project! Open source only survives if you help it!
